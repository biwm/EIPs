(window.webpackJsonp=window.webpackJsonp||[]).push([[325],{728:function(t,e,a){"use strict";a.r(e);var s=a(46),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"simple-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[t._v("#")]),t._v(" Simple Summary")]),t._v(" "),a("p",[t._v("An RPC method for switching the wallet's active Ethereum chain.")]),t._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("wallet_switchEthereumChain")]),t._v(' RPC method allows Ethereum applications ("dapps") to request that the wallet switches its active Ethereum chain, if the wallet has a concept thereof.\nThe caller must specify a chain ID.\nThe wallet application may arbitrarily refuse or accept the request.\n'),a("code",[t._v("null")]),t._v(" is returned if the active chain was switched, and an error otherwise.")]),t._v(" "),a("p",[t._v("Important cautions for implementers of this method are included in the "),a("a",{attrs:{href:"#security-considerations"}},[t._v("Security Considerations")]),t._v(" section.")]),t._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[t._v("#")]),t._v(" Motivation")]),t._v(" "),a("p",[t._v('All dapps require the user to interact with one or more Ethereum chains in order to function.\nSome wallets only supports interacting with one chain at a time.\nWe call this the wallet\'s "active chain".\n'),a("code",[t._v("wallet_switchEthereumChain")]),t._v(" enables dapps to request that the wallet switches its active chain to whichever one is required by the dapp.\nThis enables UX improvements for both dapps and wallets.")]),t._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[t._v("#")]),t._v(" Specification")]),t._v(" "),a("p",[t._v('The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in '),a("a",{attrs:{href:"https://www.ietf.org/rfc/rfc2119.txt",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC-2119"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"wallet-switchethereumchain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wallet-switchethereumchain"}},[t._v("#")]),t._v(" "),a("code",[t._v("wallet_switchEthereumChain")])]),t._v(" "),a("p",[t._v("The method accepts a single object parameter with a "),a("code",[t._v("chainId")]),t._v(" field.\nThe method returns "),a("code",[t._v("null")]),t._v(" if the wallet switched its active chain, and an error otherwise.")]),t._v(" "),a("p",[t._v('The method presupposes that the wallet has a concept of a single "active chain".\nThe active chain is defined as the chain that the wallet is forwarding RPC requests to.')]),t._v(" "),a("h4",{attrs:{id:"parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("p",[a("code",[t._v("wallet_switchEthereumChain")]),t._v(" accepts a single object parameter, specified by the following TypeScript interface:")]),t._v(" "),a("div",{staticClass:"language-typescript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SwitchEthereumChainParameter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  chainId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("If a field does not meet the requirements of this specification, the wallet "),a("strong",[t._v("MUST")]),t._v(" reject the request.")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("chainId")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("MUST")]),t._v(" specify the integer ID of the chain as a hexadecimal string, per the "),a("RouterLink",{attrs:{to:"/eip-695.html"}},[a("code",[t._v("eth_chainId")])]),t._v(" Ethereum RPC method.")],1),t._v(" "),a("li",[t._v("The chain ID "),a("strong",[t._v("MUST")]),t._v(" be known to the wallet.")]),t._v(" "),a("li",[t._v("The wallet "),a("strong",[t._v("MUST")]),t._v(" be able to switch to the specified chain and service RPC requests to it.")])])])]),t._v(" "),a("h4",{attrs:{id:"returns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns"}},[t._v("#")]),t._v(" Returns")]),t._v(" "),a("p",[t._v("The method "),a("strong",[t._v("MUST")]),t._v(" return "),a("code",[t._v("null")]),t._v(" if the request was successful, and an error otherwise.")]),t._v(" "),a("p",[t._v("If the wallet does not have a concept of an active chain, the wallet "),a("strong",[t._v("MUST")]),t._v(" reject the request.")]),t._v(" "),a("h3",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),a("p",[t._v("These examples use JSON-RPC, but the method could be implemented using other RPC protocols.")]),t._v(" "),a("p",[t._v("To switch to Mainnet:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jsonrpc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wallet_switchEthereumChain"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"params"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chainId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("To switch to the Goerli test chain:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jsonrpc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wallet_switchEthereumChain"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"params"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chainId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x5"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("h2",{attrs:{id:"rationale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[t._v("#")]),t._v(" Rationale")]),t._v(" "),a("p",[t._v("The purpose "),a("code",[t._v("wallet_switchEthereumChain")]),t._v(" is to provide dapps with a way of requesting to switch the wallet's active chain, which they would otherwise have to ask the user to do manually.")]),t._v(" "),a("p",[t._v("The method accepts a single object parameter to allow for future extensibility at virtually no cost to implementers and consumers.")]),t._v(" "),a("p",[t._v("For related work, see "),a("RouterLink",{attrs:{to:"/eip-3085.html"}},[t._v("EIP-3085: "),a("code",[t._v("wallet_addEthereumChain")])]),t._v(" and "),a("RouterLink",{attrs:{to:"/eip-2015.html"}},[t._v("EIP-2015: "),a("code",[t._v("wallet_updateEthereumChain")])]),t._v(".\n"),a("code",[t._v("wallet_switchEthereumChain")]),t._v(" intentionally forgoes the chain metadata parameters included in those EIPs, since it is purely concerned with switching the active chain, regardless of RPC endpoints or any other metadata associated therewith.")],1),t._v(" "),a("h2",{attrs:{id:"security-considerations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-considerations"}},[t._v("#")]),t._v(" Security Considerations")]),t._v(" "),a("p",[t._v("For wallets with a concept of an active chain, switching the active chain has significant implications for pending RPC requests and the user's experience.\nIf the active chain switches without the user's awareness, a dapp could induce the user to take actions for unintended chains.")]),t._v(" "),a("p",[t._v("In light of this, the wallet should:")]),t._v(" "),a("ul",[a("li",[t._v("Display a confirmation whenever a "),a("code",[t._v("wallet_switchEthereumChain")]),t._v(" is received, clearly identifying the requester and the chain that will be switched to.\n"),a("ul",[a("li",[t._v("The confirmation used in "),a("RouterLink",{attrs:{to:"/eip-1102.html"}},[t._v("EIP-1102")]),t._v(" may serve as a point of reference.")],1)])]),t._v(" "),a("li",[t._v("When switching the active chain, cancel all pending RPC requests and chain-specific user confirmations.")])]),t._v(" "),a("h3",{attrs:{id:"preserving-user-privacy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preserving-user-privacy"}},[t._v("#")]),t._v(" Preserving User Privacy")]),t._v(" "),a("p",[t._v("Automatically rejecting requests for chains that aren't supported or have yet to be added by the wallet allows requesters to infer which chains are supported by the wallet.\nWallet implementers should consider whether this communication channel violates any security properties of the wallet, and if so, take appropriate steps to mitigate it.")]),t._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),a("p",[t._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CC0"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=r.exports}}]);