(window.webpackJsonp=window.webpackJsonp||[]).push([[518],{927:function(e,t,a){"use strict";a.r(t);var s=a(46),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),a("p",[e._v("This EIP introduces the new "),a("code",[e._v("contenthash")]),e._v(" field for ENS resolvers, allowing for a better defined system of mapping names to network and content addresses. Additionally the "),a("code",[e._v("content")]),e._v(" and "),a("code",[e._v("multihash")]),e._v(" fields are deprecated.")]),e._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[e._v("#")]),e._v(" Motivation")]),e._v(" "),a("p",[e._v("Multiple applications including "),a("a",{attrs:{href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Metamask"),a("OutboundLink")],1),e._v(" and mobile clients such as "),a("a",{attrs:{href:"https://status.im",target:"_blank",rel:"noopener noreferrer"}},[e._v("Status"),a("OutboundLink")],1),e._v(" have begun resolving ENS names to content hosted on distributed systems such as "),a("a",{attrs:{href:"https://ipfs.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("IPFS"),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://swarm-guide.readthedocs.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Swarm"),a("OutboundLink")],1),e._v(". Due to the various ways content can be stored and addressed, a standard is required so these applications know how to resolve names and that domain owners know how their content will be resolved.")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("contenthash")]),e._v(" field allows for easy specification of network and content addresses in ENS.")]),e._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[e._v("#")]),e._v(" Specification")]),e._v(" "),a("p",[e._v("The field "),a("code",[e._v("contenthash")]),e._v(" is introduced, which permits a wide range of protocols to be supported by ENS names. Resolvers supporting this field MUST return "),a("code",[e._v("true")]),e._v(" when the "),a("code",[e._v("supportsInterface")]),e._v(" function is called with argument "),a("code",[e._v("0xbc1c58d1")]),e._v(".")]),e._v(" "),a("p",[e._v("The fields "),a("code",[e._v("content")]),e._v(" and "),a("code",[e._v("multihash")]),e._v(" are deprecated.")]),e._v(" "),a("p",[e._v("The value returned by "),a("code",[e._v("contenthash")]),e._v(" MUST be represented as a machine-readable "),a("a",{attrs:{href:"https://github.com/multiformats/multicodec",target:"_blank",rel:"noopener noreferrer"}},[e._v("multicodec"),a("OutboundLink")],1),e._v(". The format is specified as follows:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<protoCode uvarint><value []byte>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("protoCodes and their meanings are specified in the "),a("a",{attrs:{href:"https://github.com/multiformats/multicodec",target:"_blank",rel:"noopener noreferrer"}},[e._v("multiformats/multicodec"),a("OutboundLink")],1),e._v(" repository.")]),e._v(" "),a("p",[e._v("The encoding of the value depends on the content type specified by the protoCode. Values with protocodes of 0xe3 and 0xe4 represent IPFS and Swarm content; these values are encoded as v1 "),a("a",{attrs:{href:"https://github.com/multiformats/cid",target:"_blank",rel:"noopener noreferrer"}},[e._v("CIDs"),a("OutboundLink")],1),e._v(" without a base prefix, meaning their value is formatted as follows:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<protoCode uvarint><cid-version><multicodec-content-type><multihash-content-address>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("When resolving a "),a("code",[e._v("contenthash")]),e._v(", applications MUST use the protocol code to determine what type of address is encoded, and resolve the address appropriately for that protocol, if supported.")]),e._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" Example")]),e._v(" "),a("h4",{attrs:{id:"ipfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ipfs"}},[e._v("#")]),e._v(" IPFS")]),e._v(" "),a("p",[e._v("Input data:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("storage system: IPFS (0xe3)\nCID version: 1 (0x01)\ncontent type: dag-pb (0x70)\nhash function: sha2-256 (0x12)\nhash length: 32 bytes (0x20)\nhash: 29f2d17be6139079dc48696d1f582a8530eb9805b561eda517e22a892c7e3f1f\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("Binary format:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("0xe3010170122029f2d17be6139079dc48696d1f582a8530eb9805b561eda517e22a892c7e3f1f\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Text format:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ipfs://QmRAQB6YaCyidP37UdDnjFY5vQuiBrcqdyoW1CuDgwxkD4\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"swarm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swarm"}},[e._v("#")]),e._v(" Swarm")]),e._v(" "),a("p",[e._v("Input data:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("storage system: Swarm (0xe4)\nCID version: 1 (0x01)\ncontent type: swarm-manifest (0xfa)\nhash function: keccak256 (0x1b)\nhash length: 32 bytes (0x20)\nhash: d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br")])]),a("p",[e._v("Binary format:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("0xe40101fa011b20d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Text format:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("bzz://d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("Example usage with swarm hash:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ swarm hash ens contenthash d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162                                 \n> e40101fa011b20d1de9994b4d039f6548d191eb26786769f580809256b4685ef316805265ea162\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h3",{attrs:{id:"fallback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fallback"}},[e._v("#")]),e._v(" Fallback")]),e._v(" "),a("p",[e._v("In order to support names that have an IPFS or Swarm hash in their "),a("code",[e._v("content")]),e._v(" field, a grace period MUST be implemented offering those name holders time to update their names. If a resolver does not support the "),a("code",[e._v("multihash")]),e._v(" interface, it MUST be checked whether they support the "),a("code",[e._v("content")]),e._v(" interface. If they do, the value of that field SHOULD be treated in a context dependent fashion and resolved. This condition MUST be enforced until at least March 31st, 2019.")]),e._v(" "),a("h3",{attrs:{id:"implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[e._v("#")]),e._v(" Implementation")]),e._v(" "),a("p",[e._v("To support "),a("code",[e._v("contenthash")]),e._v(", a new resolver has been developed and can be found "),a("a",{attrs:{href:"https://github.com/ensdomains/resolvers/blob/master/contracts/PublicResolver.sol",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(", you can also find this smart contract deployed on:")]),e._v(" "),a("ul",[a("li",[e._v("Mainnet : "),a("a",{attrs:{href:"https://etherscan.io/address/0xd3ddccdd3b25a8a7423b5bee360a42146eb4baf3",target:"_blank",rel:"noopener noreferrer"}},[e._v("0xd3ddccdd3b25a8a7423b5bee360a42146eb4baf3"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Ropsten : "),a("a",{attrs:{href:"https://ropsten.etherscan.io/address/0xde469c7106a9fbc3fb98912bb00be983a89bddca",target:"_blank",rel:"noopener noreferrer"}},[e._v("0xde469c7106a9fbc3fb98912bb00be983a89bddca"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("There are also implementations in multiple languages to encode and decode "),a("code",[e._v("contenthash")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/pldespaigne/content-hash",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/filips123/ContentHashPy",target:"_blank",rel:"noopener noreferrer"}},[e._v("Python"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[e._v("#")]),e._v(" Copyright")]),e._v(" "),a("p",[e._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CC0"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=n.exports}}]);